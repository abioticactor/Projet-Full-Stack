@inject Projet_FullStack_FrontEnd.Services.AuthService AuthService
@inject NavigationManager NavigationManager

@if (AuthService.IsAuthenticated)
{
    @ChildContent
}
else
{
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh; flex-direction: column; gap: 1rem;">
        <p style="color: #ff6b6b; font-size: 1.2rem;">⚠️ Vous devez être connecté pour accéder à cette page</p>
        <p style="color: #888;">Redirection vers la page de connexion...</p>
    </div>
}

@code {
    [Parameter]
    public RenderFragment? ChildContent { get; set; }

    protected override void OnInitialized()
    {
        if (!AuthService.IsAuthenticated)
        {
            // Rediriger vers la page de connexion après 2 secondes
            _ = Task.Run(async () =>
            {
                await Task.Delay(2000);
                NavigationManager.NavigateTo("/", forceLoad: true);
            });
        }
    }
}
